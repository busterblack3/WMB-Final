<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Woods Mill Bend</title>

    <link rel="icon" href="../images/logo.png" type="image/png" />
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500&display=swap" rel="stylesheet" />

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JRPSZJ8FS7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag("js", new Date());
      gtag("config", "G-G7TKXRGNH8");
    </script>

    <style>
      html { scroll-behavior: smooth; }
      body { height: auto; min-height: 100vh; }
      .hamburger, .hamburger-contact { position: fixed; }
      .scroll-section { box-sizing: border-box; scroll-margin-top: 30px; }
      #home.scroll-section { min-height: 100vh; }
      section.contact-page { padding-top: 60px; padding-bottom: 80px; }

      .fs-frm { max-width: 600px; margin: 50px auto; padding: 20px; border: 1px solid #e1e1e1; background-color: #f8f8f8; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
      .fs-frm input, .fs-frm textarea, .fs-frm fieldset { margin: 0; padding: 0; border: none; box-sizing: border-box; }
      .fs-frm-inputs { overflow: hidden; }
      .fs-frm input, .fs-frm textarea { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #e1e1e1; border-radius: 4px; font-size: 16px; }
      .fs-frm label { font-weight: bold; display: block; margin-top: 15px; }
      .fs-frm input[type="submit"] { background-color: #333; color: #fff; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; transition: background-color 0.3s; }
      .fs-frm input[type="submit"]:hover { background-color: #555; }
      .form-logo { width: 150px; height: auto; display: block; margin: 0 auto 20px; }

      @media only screen and (max-width: 768px) {
        .fs-frm { max-width: calc(100% - 30px); margin-left: 15px; margin-right: 15px; padding: 15px; }
      }

      footer { position: relative; bottom: auto; }
      .section-header { max-width: 1100px; margin: 0 auto 30px auto; padding: 0 20px; text-align: center; }
      .section-header h2 { margin: 0 0 10px 0; letter-spacing: 0.08em; text-transform: uppercase; font-size: 14px; font-weight: 600; }
      .section-header p { margin: 0; font-size: 18px; }

      /* Sticky header */
      .sticky-header-bar { position: fixed; top: 0; left: 0; right: 0; height: 56px; display: flex; align-items: center; background: rgba(248,248,248,0.96); border-bottom: 1px solid rgba(0,0,0,0.12); transform: translateY(-100%); transition: transform 220ms ease; z-index: 900; }
      body.has-sticky-header .sticky-header-bar { transform: translateY(0); }
      .sticky-header-inner { width: 100%; max-width: 1100px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: center; }
      .sticky-header-title { font-family: "Courier New", monospace; letter-spacing: 0.08em; text-transform: uppercase; font-size: 12px; }
      .hamburger { z-index: 950; }
      .dropdown-content { z-index: 960; }

      /* =====================
         MAP MODAL (Leaflet)
         ===================== */

      #mapModal {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.72);
        z-index: 1050;
        align-items: center;
        justify-content: center;
      }

      .map-modal-leaflet {
        width: 90vw;
        height: 88vh;
        max-width: 1300px;
        position: relative;
        display: flex;
        flex-direction: column;
        padding: 0;
        overflow: hidden;
        border-radius: 10px;
        background: #e8e4d9;
        box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      }

      #leafletMap {
        width: 100%;
        height: 100%;
        background: #e8e4d9;
      }

      .map-modal-leaflet .map-modal-close {
        position: absolute;
        top: 14px; left: 16px;
        z-index: 1100;
        font-size: 22px; line-height: 1;
        cursor: pointer;
        color: #3a2a1a;
        background: rgba(248,244,236,0.88);
        border-radius: 50%;
        width: 32px; height: 32px;
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        transition: background 0.2s;
        user-select: none;
      }
      .map-modal-leaflet .map-modal-close:hover { background: rgba(248,244,236,1); }

      /* Info panel */
      .map-info-panel {
        position: absolute;
        top: 0; right: -360px;
        width: 340px; height: 100%;
        background: rgba(248,244,236,0.97);
        backdrop-filter: blur(4px);
        padding: 48px 22px 24px;
        box-shadow: -4px 0 24px rgba(0,0,0,0.18);
        transition: right 0.28s cubic-bezier(0.4,0,0.2,1);
        z-index: 1000;
        overflow-y: auto;
        box-sizing: border-box;
      }
      .map-info-panel.active { right: 0; }

      .map-info-number {
        font-family: 'Courier New', Courier, monospace;
        font-size: 48px;
        color: rgba(44,24,16,0.10);
        line-height: 1;
        margin: 0 0 2px;
      }

      .map-info-panel h3 {
        font-family: 'Courier New', Courier, monospace;
        font-size: 13px;
        margin: 0 0 14px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: #2c1810;
        line-height: 1.4;
      }

      /* Drawing / property image */
      .map-info-drawing {
        width: 75%;
        margin: 0 auto 0;
        display: block;
        object-fit: contain;
        border-radius: 0;
        max-height: 150px;
        box-shadow: none !important;
        filter: none !important;
      }
      .map-info-no-drawing { display: none; }

      .map-info-divider {
        width: 40px;
        height: 1px;
        background: rgba(44,24,16,0.22);
        margin: 14px 0;
      }

      .map-info-panel p.map-info-desc {
        font-family: 'Courier New', Courier, monospace;
        font-size: 12px;
        line-height: 1.8;
        color: #4a3728;
        margin: 0;
      }

      .map-info-close {
        position: absolute;
        top: 14px; right: 14px;
        background: none; border: none;
        font-size: 16px; cursor: pointer;
        color: #aaa; padding: 4px 6px; line-height: 1;
        font-family: 'Courier New', Courier, monospace;
      }
      .map-info-close:hover { color: #333; }

      /* Photo grid */
      .map-photo-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 4px;
        margin-top: 0;
      }
      .map-photo-grid img {
        width: 100%;
        aspect-ratio: 4/3;
        object-fit: cover;
        cursor: pointer;
        border-radius: 2px;
        transition: opacity 0.15s ease;
        display: block;
      }
      .map-photo-grid img:hover { opacity: 0.82; }
      .map-photo-grid.single img {
        grid-column: 1 / -1;
        aspect-ratio: 16/9;
      }
      .map-photo-no-imgs {
        font-family: 'Courier New', Courier, monospace;
        font-size: 11px;
        color: #bbb;
        letter-spacing: 0.04em;
        font-style: italic;
        margin: 6px 0 0;
      }

      /* Hint */
      .map-tap-hint {
        position: absolute;
        bottom: 16px; left: 50%;
        transform: translateX(-50%);
        background: rgba(248,244,236,0.88);
        color: #3a2a1a;
        font-family: 'Courier New', monospace;
        font-size: 11px;
        letter-spacing: 0.06em;
        text-transform: uppercase;
        padding: 6px 14px;
        border-radius: 20px;
        pointer-events: none;
        z-index: 999;
        white-space: nowrap;
        box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        transition: opacity 0.4s;
      }
      .map-tap-hint.hidden { opacity: 0; }

      /* Markers */
      .map-marker {
        width: 28px; height: 28px;
        border-radius: 50%;
        background: rgba(44,24,16,0.82);
        border: 2px solid rgba(255,255,255,0.85);
        color: white;
        font-size: 11px; font-weight: bold;
        display: flex; align-items: center; justify-content: center;
        cursor: pointer;
        transition: transform 0.15s ease, background 0.15s ease, box-shadow 0.15s ease;
        font-family: 'Courier New', monospace;
        box-shadow: 0 2px 8px rgba(0,0,0,0.45);
        user-select: none;
      }
      .map-marker:hover { background: rgba(100,50,20,0.95); transform: scale(1.25); box-shadow: 0 4px 14px rgba(0,0,0,0.5); }
      .map-marker.active { background: #8b4513; transform: scale(1.18); border-color: white; box-shadow: 0 4px 14px rgba(0,0,0,0.5); }

      /* Photo lightbox */
      #photoLightbox {
        display: none;
        position: fixed; inset: 0;
        background: rgba(10,6,3,0.92);
        z-index: 2000;
        align-items: center; justify-content: center;
        flex-direction: column;
      }
      #photoLightbox.open { display: flex; }
      #photoLightbox img { max-width: 90vw; max-height: 82vh; object-fit: contain; border-radius: 2px; box-shadow: 0 8px 40px rgba(0,0,0,0.6); }
      .photo-lb-close { position: absolute; top: 18px; right: 22px; color: rgba(255,255,255,0.6); font-size: 26px; cursor: pointer; font-family: 'Courier New', monospace; line-height: 1; background: none; border: none; }
      .photo-lb-close:hover { color: #fff; }
      .photo-lb-nav { position: absolute; top: 50%; transform: translateY(-50%); background: none; border: none; color: rgba(255,255,255,0.55); font-size: 32px; cursor: pointer; padding: 0 20px; font-family: 'Courier New', monospace; line-height: 1; transition: color 0.15s; }
      .photo-lb-nav:hover { color: #fff; }
      .photo-lb-prev { left: 0; }
      .photo-lb-next { right: 0; }
      .photo-lb-counter { position: absolute; bottom: 20px; font-family: 'Courier New', monospace; font-size: 11px; color: rgba(255,255,255,0.4); letter-spacing: 0.08em; }

      @media (max-width: 640px) {
        .map-modal-leaflet { width: 100vw; height: 100dvh; border-radius: 0; }
        .map-info-panel { width: 100%; right: auto; bottom: -65%; top: auto; height: 65%; transition: bottom 0.28s cubic-bezier(0.4,0,0.2,1); }
        .map-info-panel.active { bottom: 0; }
      }
    </style>
  </head>

  <body>
    <div id="menu-placeholder"></div>

    <div id="stickyHeaderBar" class="sticky-header-bar">
      <div class="sticky-header-inner">
        <div class="sticky-header-title">Woods Mill Bend</div>
      </div>
    </div>

    <!-- HOME / HERO -->
    <section id="home" class="scroll-section">
      <main id="main-index-page">
        <video class="index-page" autoplay muted loop playsinline>
          <source src="../images/video/long_run_opt.mp4" type="video/mp4" />
        </video>
        <img src="../images/wmb_words.png" alt="Woods Mill Bend" class="hero-title" />
      </main>
    </section>

    <div id="stickyHeaderTrigger" aria-hidden="true"></div>

    <!-- AIRBNB -->
    <section id="airbnb" class="scroll-section airbnb-logos-section">
      <div class="airbnb-booking-wrap">
        <img src="../images/airbnb_logo.png" alt="Airbnb" class="airbnb-brand" />
        <h2 class="airbnb-booking-title">Airbnb Booking</h2>
        <p class="airbnb-booking-copy">
          For booking details for the Main House and/or the Log Cabin, click the links
          below to open the Airbnb listing pages for each building.
        </p>
        <div class="airbnb-logos-grid">
          <a href="https://www.airbnb.com/rooms/23501423?source_impression_id=p3_1691980929_h7BpZFuMZp3DUj4%2F" target="_blank" rel="noopener noreferrer" aria-label="Open Airbnb listing for Woods Mill Bend - Main House">
            <img src="../images/Main_Logo.png" alt="Woods Mill Bend - Main House" />
          </a>
          <a href="https://www.airbnb.com/rooms/1409535735609516063?guests=1&adults=1&s=67&unique_share_id=4c49dcab-3e33-4196-ab56-d2a0e388e746" target="_blank" rel="noopener noreferrer" aria-label="Open Airbnb listing for Woods Mill Bend - Log Cabin">
            <img src="../images/Log_Logo.png" alt="Woods Mill Bend - Log Cabin" />
          </a>
        </div>
      </div>
    </section>

    <!-- PROPERTY -->
    <section id="property" class="scroll-section">
      <main>
        <header class="section-header">
          <img src="../images/wmb-logo.png" alt="Woods Mill Bend Logo" class="section-logo" />
        </header>
        <div class="property-map-preview" onclick="openMapModal()" style="cursor:pointer;">
          <img src="../images/map-color2.jpg" alt="Property Map" class="property-map-img" />
        </div>
        <div style="text-align: center; margin-top: 16px;">
          <button class="property-map-btn" onclick="openMapModal()" aria-label="View full map"
            style="position:static; transform:none; display:inline-block; cursor:pointer;">
            &#x26F6; View Full Map
          </button>
        </div>
      </main>
    </section>

    <!-- USER MANUAL -->
    <section id="manual" class="scroll-section manual-page">
      <main style="background-color: transparent; text-align: center; max-width: 1100px; margin: 0 auto; padding: 0 20px;">
        <header class="section-header">
          <img src="../images/wmb-logo.png" alt="Woods Mill Bend Logo" class="section-logo" />
        </header>
        <p class="manual-intro">Click a book below to download the user manual (password required).</p>
        <div class="manual-container">
          <a class="manual-link manual-download" href="../pdf/wmb-2026-user-manual-main.pdf" data-manual-href="../pdf/wmb-2026-user-manual-main.pdf">
            <img src="../images/user-manual-cover-main-2026.jpg" alt="2026 Main House Manual" class="manual-cover" />
            <p>2026 Main House Manual</p>
          </a>
          <a class="manual-link manual-download" href="../pdf/wmb-2026-user-manual-log.pdf" data-manual-href="../pdf/wmb-2026-user-manual-log.pdf">
            <img src="../images/user-manual-cover-log-2026.jpg" alt="2026 Log Cabin Manual" class="manual-cover" />
            <p>2026 Log Cabin Manual</p>
          </a>
        </div>
      </main>
    </section>

    <!-- PHOTOGRAPHS -->
    <section id="photos" class="scroll-section photos-section">
      <div class="photos-container">
        <header class="section-header"><h2>Photographs</h2></header>
        <div class="masonry-gallery" id="photoGallery">
          <img src="../images/gallery/property/image001.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image003.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image005.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image006.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image007.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image008.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image012.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image013.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image018.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image024.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image031.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image032.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image033.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image035.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image036.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image037.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image041.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image043.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image049.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image054.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image055.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image5.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/property/image7.png" alt="Woods Mill Bend - Property" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image1.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image2.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image16.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image17.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image18.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image19.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image20.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image21.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image23.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image24.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image26.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image27.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Inside/image28.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image10.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image11.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image12.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image14.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image014.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image017.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image021.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image023.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image039.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/main-house/Outside/image053.png" alt="Woods Mill Bend - Main House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/log-cabin/1cc58b6f-9354-48f0-8317-bba780554626.png" alt="Woods Mill Bend - Log Cabin" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/log-cabin/22da080c-fe47-4259-a45f-7d9e0cd77526.png" alt="Woods Mill Bend - Log Cabin" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/log-cabin/568666d6-75b3-4576-ae14-17615b301f5a.png" alt="Woods Mill Bend - Log Cabin" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/log-cabin/96ce8db1-0155-4749-98b1-d25f72b13499.png" alt="Woods Mill Bend - Log Cabin" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/log-cabin/image088.png" alt="Woods Mill Bend - Log Cabin" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/log-cabin/IMG_4083.png" alt="Woods Mill Bend - Log Cabin" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/sauna-house/image086.png" alt="Woods Mill Bend - Sauna House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/sauna-house/image087.png" alt="Woods Mill Bend - Sauna House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/sauna-house/image089.png" alt="Woods Mill Bend - Sauna House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/sauna-house/image090.png" alt="Woods Mill Bend - Sauna House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/farm-house/image3.png" alt="Woods Mill Bend - Farm House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/farm-house/image4.png" alt="Woods Mill Bend - Farm House" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/dance-hall/image047.png" alt="Woods Mill Bend - Dance Hall" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/dance-hall/image048.png" alt="Woods Mill Bend - Dance Hall" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/dance-hall/image051.png" alt="Woods Mill Bend - Dance Hall" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
          <img src="../images/gallery/dance-hall/image084.png" alt="Woods Mill Bend - Dance Hall" class="gallery-img" loading="lazy" onclick="openImageModal(this)" />
        </div>
        <button id="loadMorePhotos" class="load-more-btn">View More Photos</button>
        <button id="showLessPhotos" class="load-more-btn hidden">Show Less</button>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="scroll-section contact-section">
      <div class="contact-container">
        <div class="contact-card">
          <div class="contact-header">
            <img src="../images/wmb-logo.png" alt="Woods Mill Bend" class="contact-logo" />
            <h2 class="contact-title">Get in Touch</h2>
            <p class="contact-intro" style="font-style: normal; text-align: justify;">
              Whether you're planning a visit, have questions about the property,
              or simply want to say hello, please shoot us a note using the form below.
            </p>
            <h2 class="contact-title" style="margin-top: 24px;">Artist Residency</h2>
            <p class="contact-intro" style="font-style: normal; text-align: justify;">
              Woods Mill Bend is currently accepting applications for artist residencies.
              The program is open to artists of all disciplines. In exchange for the use
              of the facilities, artists will be encouraged, but not required, to donate
              one piece of art created (fully or partially) on-site to Woods Mill Bend.
              If you're interested in applying in the WMB Residency, please use the form
              below to tell us a little bit about yourself, your work, and what you hope
              to accomplish during your WMB Artist Residency.
            </p>
          </div>
          <form class="contact-form" name="contact-form" accept-charset="utf-8" action="https://formspree.io/f/myyqelpw" method="post">
            <div class="form-group">
              <label for="con-full-name">Name</label>
              <input type="text" name="name" id="con-full-name" placeholder="Your name" required />
            </div>
            <div class="form-group">
              <label for="con-email-address">Email</label>
              <input type="email" name="_replyto" id="con-email-address" placeholder="your@email.com" required />
            </div>
            <div class="form-group">
              <label for="con-message">Message</label>
              <textarea rows="4" name="message" id="con-message" placeholder="How can we help?" required></textarea>
            </div>
            <input type="hidden" name="_subject" id="con-email-subject" value="Contact Form Submission" />
            <button type="submit" class="contact-submit">Send Message</button>
          </form>
          <div class="contact-footer">
            <span class="contact-divider-text">or connect with us</span>
            <a href="https://www.instagram.com/woodsmillbend" target="_blank" rel="noopener" class="contact-social-link" aria-label="Follow Woods Mill Bend on Instagram">
              <img src="../images/insta_logo.png" alt="" class="contact-social-icon" />
              <span>@woodsmillbend</span>
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- MAP MODAL -->
    <div id="mapModal" class="modal" onclick="if(event.target===this)closeMapModal()">
      <div class="map-modal-content map-modal-leaflet">
        <span class="map-modal-close" onclick="closeMapModal()" aria-label="Close map">&times;</span>
        <div id="leafletMap"></div>

        <!-- Info panel: number → name → drawing → divider → desc → divider → photos -->
        <div id="mapInfoPanel" class="map-info-panel">
          <button class="map-info-close" onclick="closeInfoPanel()" aria-label="Close">✕</button>
          <div class="map-info-number" id="mapInfoNumber"></div>
          <h3 id="mapInfoTitle"></h3>
          <img id="mapInfoDrawing" class="map-info-drawing" src="" alt="" />
          <div class="map-info-divider"></div>
          <p class="map-info-desc" id="mapInfoDesc"></p>
          <div class="map-info-divider" id="mapPhotoDivider" style="display:none;"></div>
          <div id="mapPhotoGrid" class="map-photo-grid"></div>
          <p class="map-photo-no-imgs" id="mapNoPhotos" style="display:none;">no photos yet</p>
        </div>

        <div class="map-tap-hint" id="mapTapHint">Tap a marker to explore</div>
      </div>
    </div>

    <!-- Photo Lightbox -->
    <div id="photoLightbox" onclick="if(event.target===this)closeLightbox()">
      <button class="photo-lb-close" onclick="closeLightbox()">&#x2715;</button>
      <button class="photo-lb-nav photo-lb-prev" onclick="lbStep(-1)">&#x2039;</button>
      <img id="photoLbImg" src="" alt="" />
      <button class="photo-lb-nav photo-lb-next" onclick="lbStep(1)">&#x203A;</button>
      <div class="photo-lb-counter" id="photoLbCounter"></div>
    </div>

    <!-- Image Modal (gallery) -->
    <div id="imageModal" class="modal">
      <div class="image-modal-content">
        <img id="modalImage" alt="Selected Gallery Image" style="width: auto;" />
      </div>
    </div>

    <!-- Manual Password Modal -->
    <div id="passwordModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <p>Enter password to access the WMB User Manual</p>
        <input type="password" id="passwordInput" />
        <button onclick="checkPassword()">Submit</button>
      </div>
    </div>

    <footer style="background-color: transparent; width: 100%;"></footer>

    <script src="../js/scripts.js"></script>

    <script>
      // ── Config ─────────────────────────────────────────────────────────
      // For the real site (public_html/html/main.html) use '../images/map/'
      // For local prototype testing change to 'images/map/'
      const MAP_IMG_BASE = '../images/map/';
      const MAP_IMG_W = 807;
      const MAP_IMG_H = 894;

      // ── Location data ──────────────────────────────────────────────────
      const mapLocations = [
        {
          id: 1,
          name: "Main House & Pool",
          desc: "Four bedrooms (five individual beds), two bathrooms, and a pool. The primary residence of Woods Mill Bend and the flagship short-term rental.",
          coords: [374, 432],
          drawing: "../images/property/mainhouse.png",
          folder: "1-main-house",
          images: ["image053.png", "image10.png", "image16.png", "image17.png", "image18.png"]
        },
        {
          id: 2,
          name: "Log Cabin",
          desc: "One bedroom, one bathroom — a cozy standalone cabin nestled in the trees, available for short-term rentals on Airbnb.",
          coords: [557, 407],
          drawing: "../images/property/logcabin.png",
          folder: "2-log-cabin",
          images: ["IMG_4083.png", "image088.png"]
        },
        {
          id: 3,
          name: "Sauna Haus",
          desc: "Recently renovated with an electric sauna room and two large tubs on the back porch for cold plunge. Shared amenity for all guests.",
          coords: [422, 498],
          drawing: "../images/property/artstudio.png",
          folder: "3-sauna-haus",
          images: ["image086.png", "image090.png"]
        },
        {
          id: 4,
          name: "Farm House",
          desc: "Currently being renovated. Four bedrooms, one bathroom — used as a workspace and gathering space for friends and family.",
          coords: [440, 574],
          drawing: "../images/property/farmhouse.png",
          folder: "4-farm-house",
          images: ["image055.png", "image4.png"]
        },
        {
          id: 5,
          name: "Dance Hall",
          desc: "A large, open, stand-alone room overlooking the Rocky River. Perfect for yoga (mats & blocks provided), ping pong, movie nights (projector on site), or gathering.",
          coords: [402, 604],
          drawing: "../images/property/dancehall.png",
          folder: "5-dance-hall",
          images: ["image047.png", "image084.png"]
        },
        {
          id: 6,
          name: "Old Mill",
          desc: "A historic mill structure — a remnant of the land's storied past, offering a glimpse into the history of Woods Mill Bend.",
          coords: [413, 689],
          drawing: null,
          folder: "6-old-mill",
          images: []
        },
        {
          id: 7,
          name: "Secret Garden",
          desc: "A hidden garden retreat tucked into the landscape — a quiet spot for reading, reflection, or simply listening to the river.",
          coords: [330, 586],
          drawing: null,
          folder: "7-secret-garden",
          images: ["image036.png", "image043.png"]
        },
        {
          id: 8,
          name: "River Access #1",
          desc: "Primary access point to the Rocky River. Perfect for swimming, kayaking, fishing, or watching the water move.",
          coords: [339, 771],
          drawing: null,
          folder: "8-river-access-1",
          images: ["image005.png", "image012.png"]
        },
        {
          id: 9,
          name: "River Access #2",
          desc: "A second river access point offering a different angle along the Rocky River banks — great for a quiet morning walk.",
          coords: [214, 243],
          drawing: null,
          folder: "9-river-access-2",
          images: ["image003.png", "image035.png"]
        },
        {
          id: 10,
          name: "Bridge",
          desc: "The wooden bridge connecting areas of the property, with views of the river and surrounding landscape in both directions.",
          coords: [328, 447],
          drawing: null,
          folder: "10-bridge",
          images: []
        }
      ];

      // ── State ──────────────────────────────────────────────────────────
      let wmbMap = null;
      let activeMarkerEl = null;
      let hintDismissed = false;

      // ── Init ───────────────────────────────────────────────────────────
      function initMap() {
        if (wmbMap) { wmbMap.invalidateSize(); return; }

        const bounds = [[0, 0], [MAP_IMG_H, MAP_IMG_W]];

        wmbMap = L.map('leafletMap', {
          crs: L.CRS.Simple,
          minZoom: -1, maxZoom: 2.5,
          zoomSnap: 0.25, zoomDelta: 0.5,
          attributionControl: false,
          zoomControl: true
        });
        wmbMap.zoomControl.setPosition('bottomright');

        L.imageOverlay('../images/map-color2.jpg', bounds).addTo(wmbMap);
        wmbMap.fitBounds(bounds);
        wmbMap.setMaxBounds([[-MAP_IMG_H * 0.15, -MAP_IMG_W * 0.15], [MAP_IMG_H * 1.15, MAP_IMG_W * 1.15]]);

        mapLocations.forEach(loc => {
          const icon = L.divIcon({
            className: '',
            html: `<div class="map-marker" title="${loc.name}">${loc.id}</div>`,
            iconSize: [28, 28], iconAnchor: [14, 14]
          });
          L.marker(loc.coords, { icon }).addTo(wmbMap).on('click', function () {
            showInfoPanel(loc, this);
          });
        });

        wmbMap.on('click', function (e) {
          if (!e.originalEvent.target.closest('.map-marker')) closeInfoPanel();
        });
      }

      // ── Info panel ─────────────────────────────────────────────────────
      function showInfoPanel(loc, marker) {
        if (activeMarkerEl) activeMarkerEl.classList.remove('active');
        const el = marker.getElement()?.querySelector('.map-marker');
        if (el) { el.classList.add('active'); activeMarkerEl = el; }

        // Number + name
        document.getElementById('mapInfoNumber').textContent = loc.id;
        document.getElementById('mapInfoTitle').textContent = loc.name;

        // Drawing (property image)
        const drawEl = document.getElementById('mapInfoDrawing');
        if (loc.drawing) {
          drawEl.src = loc.drawing;
          drawEl.alt = loc.name;
          drawEl.style.display = 'block';
        } else {
          drawEl.style.display = 'none';
          drawEl.src = '';
        }

        // Description
        document.getElementById('mapInfoDesc').textContent = loc.desc;

        // Photos
        const gridEl = document.getElementById('mapPhotoGrid');
        const dividerEl = document.getElementById('mapPhotoDivider');
        gridEl.innerHTML = '';
        gridEl.className = 'map-photo-grid';

        if (loc.images && loc.images.length > 0) {
          dividerEl.style.display = 'block';
          if (loc.images.length === 1) gridEl.classList.add('single');
          loc.images.forEach((filename, idx) => {
            const img = document.createElement('img');
            img.src = MAP_IMG_BASE + loc.folder + '/' + filename;
            img.alt = loc.name + ' ' + (idx + 1);
            img.loading = 'lazy';
            img.onclick = () => openLightbox(loc, idx);
            gridEl.appendChild(img);
          });
          document.getElementById('mapNoPhotos').style.display = 'none';
        } else {
          dividerEl.style.display = 'none';
          document.getElementById('mapNoPhotos').style.display = 'none';
        }

        document.getElementById('mapInfoPanel').classList.add('active');

        if (!hintDismissed) {
          hintDismissed = true;
          document.getElementById('mapTapHint').classList.add('hidden');
        }
      }

      function closeInfoPanel() {
        document.getElementById('mapInfoPanel').classList.remove('active');
        if (activeMarkerEl) { activeMarkerEl.classList.remove('active'); activeMarkerEl = null; }
      }

      // ── Lightbox ───────────────────────────────────────────────────────
      let lbLoc = null;
      let lbIdx = 0;

      function openLightbox(loc, idx) {
        lbLoc = loc; lbIdx = idx;
        renderLightbox();
        document.getElementById('photoLightbox').classList.add('open');
      }

      function renderLightbox() {
        document.getElementById('photoLbImg').src = MAP_IMG_BASE + lbLoc.folder + '/' + lbLoc.images[lbIdx];
        document.getElementById('photoLbCounter').textContent = (lbIdx + 1) + ' / ' + lbLoc.images.length;
        const show = lbLoc.images.length > 1;
        document.querySelector('.photo-lb-prev').style.display = show ? '' : 'none';
        document.querySelector('.photo-lb-next').style.display = show ? '' : 'none';
      }

      function lbStep(dir) {
        lbIdx = (lbIdx + dir + lbLoc.images.length) % lbLoc.images.length;
        renderLightbox();
      }

      function closeLightbox() {
        document.getElementById('photoLightbox').classList.remove('open');
        document.getElementById('photoLbImg').src = '';
      }

      // ── Modal open/close ───────────────────────────────────────────────
      function openMapModal() {
        document.getElementById('mapModal').style.display = 'flex';
        setTimeout(() => { initMap(); if (wmbMap) wmbMap.invalidateSize(); }, 80);
      }

      function closeMapModal() {
        document.getElementById('mapModal').style.display = 'none';
        closeInfoPanel();
      }

      // ── Keyboard ───────────────────────────────────────────────────────
      document.addEventListener('keydown', function (e) {
        if (document.getElementById('photoLightbox').classList.contains('open')) {
          if (e.key === 'ArrowRight') lbStep(1);
          else if (e.key === 'ArrowLeft') lbStep(-1);
          else if (e.key === 'Escape') closeLightbox();
        } else if (e.key === 'Escape' && document.getElementById('mapModal').style.display === 'flex') {
          closeMapModal();
        }
      });
    </script>
  </body>
</html>
